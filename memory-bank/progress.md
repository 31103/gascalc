# Progress

## 現在のステータス

- 大規模リファクタリング作業（ファイル整理、設定修正、コード品質向上）のフェーズ1～3が完了。
- 主要機能は動作し、TailwindCSSによるデザインも適用済み（ユーザー報告）。
- `docs/refactoring-plan.md` は最新の計画に更新済み。
- GitHub Pages のデモ版はリファクタリング前の状態（更新が必要な場合）。

## 実装済みの機能 (リファクタリング後)

- **データ入力:**
  - 日付時刻 (DDHHMM
    形式、HHMM形式での日付省略可。HHMM形式での初回入力時は日付を「1日」として処理)
    と流量 (L/min) の入力。
  - FiO2 モード有効時の FiO2 (%) 入力 (21-100)。
- **データ管理:**
  - 入力データのリスト表示。
  - 入力データの追加、修正、削除機能。
  - 全入力データのクリア機能。
- **計算:**
  - 入力データに基づき、日ごとの酸素使用量を自動計算・表示。
  - FiO2 モード有効時の酸素使用量計算（室内気使用時:
    `((FiO2 - 21) * 0.01 / 0.79 * Flow)`）。
  - FiO2 モードかつ室内気不使用モード有効時の酸素 (`FiO2 * 0.01 * Flow`)
    および窒素 (`(100 - FiO2) * 0.01 * Flow`) 使用量計算・表示。
- **設定:**
  - 設定モーダルによる FiO2 モードの有効/無効切り替え。
  - FiO2 モード有効時のみ、室内気不使用モードの有効/無効切り替え。
- **UI/UX:**
  - 計算結果（酸素量、窒素量）をクリップボードにコピーする機能。
  - ツールチップによる入力形式や設定項目の説明表示。
  - 基本的な入力値バリデーションとエラーメッセージ表示。
  - エンターキーによるフォーカス移動とデータ追加。
  - TailwindCSSによるスタイリングとカスタムコンポーネントクラスの利用。
  - セマンティックHTMLによる構造化。

## 残っているタスク / 改善可能性

- **リファクタリング計画 (フェーズ4 - 将来的な改善検討):**
  - 状態管理の高度化。
  - `src/utils/dom.ts` (`updateUI`) のさらなる改善。
  - `build.ts` の改善。
  - `no-explicit-any` リンタールールの除外解除。
- **その他改善案:**
  - データの永続化 (例: LocalStorage)。
  - より詳細な入力バリデーション。
  - UI/UX のさらなる洗練。
  - 単体テストの拡充 (DOM操作など)。
- **ドキュメント:**
  - `README.md` の更新（必要に応じて、最新のビルド方法や実行方法を反映）。

## 既知の問題 / 注意点

- 計算結果は理論値であり、実際の使用量とは異なる可能性がある。
- データはブラウザのメモリ上にのみ保存されるため、永続化されない。
